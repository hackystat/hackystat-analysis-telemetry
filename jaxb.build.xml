<project name="jaxb" default="jaxb">
  <description>
  Supports JAXB binding process (creation of Java classes from the XmlSchema documents.)
  </description>

  <import file="build.xml"/>
  <property environment="env"/>
  <!-- If the JAXB_TARGET env var is not defined, provide a default definition. -->
  <property name="env.JAXB_TARGET" value="2.0"/>
    
  <taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
    <classpath>
      <fileset dir="${env.JAXB_HOME}/lib" includes="*.jar" />
    </classpath>
  </taskdef>   

  <target name="jaxb" description="Runs the XJC compiler.">
    <echo message="Compiling using ${env.JAXB_HOME} for target version ${env.JAXB_TARGET}."/>
    <xjc target="${env.JAXB_TARGET}" schema="${basedir}/xml/schema/telemetry.resource.xsd" destdir="src" 
         package="org.hackystat.telemetry.service.resource.chart.jaxb">
      <produces dir="${src.dir}/org/hackystat/telemetry/service/resource/chart/jaxb" includes="*" />
    </xjc>
    <xjc target="${env.JAXB_TARGET}" schema="${basedir}/xml/schema/reducer.definition.xsd" destdir="src" 
         package="org.hackystat.telemetry.analyzer.reducer.jaxb">
      <produces dir="${src.dir}/org/hackystat/telemetry/analyzer/reducer/jaxb" includes="*" />
    </xjc>
    <xjc target="${env.JAXB_TARGET}" schema="${basedir}/xml/schema/function.definition.xsd" destdir="src" 
         package="org.hackystat.telemetry.analyzer.function.jaxb">
      <produces dir="${src.dir}/org/hackystat/telemetry/analyzer/function/jaxb" includes="*" />
    </xjc>
    <xjc target="${env.JAXB_TARGET}" schema="${basedir}/xml/schema/telemetry.definition.xsd" destdir="src" 
         package="org.hackystat.telemetry.analyzer.configuration.jaxb">
      <produces dir="${src.dir}/org/hackystat/telemetry/analyzer/configuration/jaxb" includes="*" />
    </xjc>    
  </target>
</project>
